<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="author" content="Laclede's LAN" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">

        <title>CSGO Picker | Laclede's LAN</title>

		<link rel="shortcut icon" href="./assets/images/favicon.ico">

		<script src="./assets/js/jquery-3.min.js"></script>

		<link rel="stylesheet" href="./assets/stylesheets/font-awesome.min.css">
		<link rel="stylesheet" href="./assets/stylesheets/mapPicker.css">

        <style>
            table tr {
                background-position: left center;
                background-size: cover;
                height: 50%;
                width: 25%;
            }

            table td {
                width: 25%;
            }
        </style>
	</head>

	<body>
		<table>
			<tr>
				<td onclick="disableCell('Cache')" id="Cache" style="background: url(./assets/images/map_picker/csgo/Cache.jpg) no-repeat center;">
					Cache
				</td>
				<td onclick="disableCell('Cobblestone')" id="Cobblestone" style="background: url(./assets/images/map_picker/csgo/Cobblestone.jpg) no-repeat center;">
					Cobblestone
				</td>
				<td onclick="disableCell('Dust_II')" id="Dust_II" style="background: url(./assets/images/map_picker/csgo/Dust_II.jpg) no-repeat center;">
					Dust_II
				</td>
				<td onclick="disableCell('Mirage')" id="Mirage" style="background: url(./assets/images/map_picker/csgo/Mirage.jpg) no-repeat center;">
					Mirage
				</td>
			</tr>
			<tr>
				<td onclick="disableCell('Overpass')" id="Overpass" style="background: url(./assets/images/map_picker/csgo/Overpass.jpg) no-repeat center;">
					Overpass
				</td>
				<td onclick="disableCell('Nuke')" id="Nuke" style="background: url(./assets/images/map_picker/csgo/Nuke.jpg) no-repeat center;">
					Nuke
				</td>
				<td onclick="disableCell('Train')" id="Train" style="background: url(./assets/images/map_picker/csgo/Train.jpg) no-repeat center;">
					Train
				</td>
				<td align="right">
                    <div id="homeAction">
                        <a href="./mapPicker.html">
                            &nbsp;<i class="fa fa-home fa-2x"></i>&nbsp;
                        </a>
                    </div>

                    <div id="backAction" onClick="resetPage();">
                        &nbsp;
                    </div>
				</td>
			</tr>

		</table>

		<script>
            // Add function that entry from array by value
            Array.prototype.remove = function() {
                var what, a = arguments, L = a.length, ax;
                    while (L && this.length) {
                    what = a[--L];
                    while ((ax = this.indexOf(what)) !== -1) {
                        this.splice(ax, 1);
                    }
                }
                return this;
            };

            var eliminatedMaps = new Array();
            var mapPool = ['Dust_II', 'Nuke', 'Cache', 'Mirage', 'Overpass', 'Train', 'Cobblestone'];
			<!--'de_ali', 'de_aztec', 'de_bank', 'de_bazaar', 'de_blackgold', 'de_cache', 'de_castle', 'de_cbble', 'de_coast', 'de_dust', 'de_dust2', 'de_empire', 'de_facade', 'de_favela', 'de_inferno', 'de_lake', 'de_log', 'de_marquis', 'de_mikla', 'de_mirage', 'de_mist', 'de_nuke', 'de_overgrown', 'de_overpass', 'de_rails', 'de_resort', 'de_royal', 'de_safehouse', 'de_santorini', 'de_seaside', 'de_season', 'de_shorttrain', 'de_stmarc', 'de_sugarcane', 'de_train', 'de_tulip', 'de_vertigo', 'de_zoo'-->];

            $( document ).ready(function() {
                window.console.clear();
            });

            function disableCell(mapName) {
                mapName = mapName.toString();

                if (mapPool.indexOf(mapName) > -1) {
                    if (eliminatedMaps.length < mapPool.length - 1 && eliminatedMaps.indexOf(mapName) < 0) {
                        eliminatedMaps.push(mapName);
                        $('#' + mapName).empty();
                        $('#' + mapName).css('background-image', 'none');

                        window.console.log(mapName + ' cell removed.');
                    }
                }

                if (eliminatedMaps.length == mapPool.length - 1) {
                    $('#backAction').html('&nbsp;<i class="fa fa-undo fa-2x"></i>&nbsp;'); /* REST */
                } else if (eliminatedMaps.length > 0) {
                    $('#backAction').css('visibility', 'visible');
                    $('#backAction').html('&nbsp;<i class="fa fa-step-backward fa-2x"></i>&nbsp;');  /* STEP BACKWARDS */
                }
            };

            function enableCell(mapName) {
                if (mapPool.indexOf(mapName) > -1 && eliminatedMaps.indexOf(mapName) > -1) {
                    $('#' + mapName).css('background-image', 'url("./assets/images/map_picker/csgo/' + mapName + '.jpg")');
                    $('#' + mapName).text(mapName);
                    eliminatedMaps.remove(mapName);

                    window.console.log(mapName + ' cell enabled.');
                }

                if (eliminatedMaps.length < 1) {
                    $('#backAction').css('visibility', 'hidden');
                }
            };

            function resetPage() {
                if (eliminatedMaps.length + 1 >= mapPool.length ) {
                    while (eliminatedMaps.length > 0) {
                        enableCell(eliminatedMaps[eliminatedMaps.length - 1]);
                    }
                } else if (eliminatedMaps.length > 0) {
                    enableCell(eliminatedMaps[eliminatedMaps.length - 1]);
                }
            };
        </script>
	</body>

</html>