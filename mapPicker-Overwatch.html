<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8" />
		<meta name="author" content="Laclede's LAN" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">

        <title>Overwatch Picker | Laclede's LAN</title>

		<link rel="shortcut icon" href="./assets/images/favicon.ico">

		<script src="./assets/js/jquery-3.min.js"></script>

		<link rel="stylesheet" href="./assets/stylesheets/font-awesome.min.css">
		<link rel="stylesheet" href="./assets/stylesheets/mapPicker.css">

		<style>
            table tr {
                background-position: left center;
                background-size: cover;
                height: 25%;
                width: 20%;
            }

            table td {
                width: 20%;
            }
		</style>
	</head>

	<body>
		<table>
			<tr>
				<td onclick="disableCell('Anubis')" onDblClick="lock('Anubis')" id="Anubis" style="background: url(./assets/images/map_picker/overwatch/anubis.jpg) no-repeat center; background-size: cover;">
					Anubis
				</td>
				<td onclick="disableCell('Dorado')" onDblClick="lock('Dorado')" id="Dorado" style="background: url(./assets/images/map_picker/overwatch/dorado.jpg) no-repeat center; background-size: cover;">
					Dorado
				</td>
				<td onclick="disableCell('Eichenwalde')" onDblClick="lock('Eichenwalde')" id="Eichenwalde" style="background: url(./assets/images/map_picker/overwatch/eichenwalde.jpg) no-repeat center; background-size: cover;">
					Eichenwalde
				</td>
				<td onclick="disableCell('Gibraltar')" onDblClick="lock('Gibraltar')" id="Gibraltar" style="background: url(./assets/images/map_picker/overwatch/gibraltar.jpg) no-repeat center; background-size: cover;">
					Gibraltar
                </td>
                <td onclick="disableCell('Hanamura')" onDblClick="lock('Hanamura')" id="Hanamura" style="background: url(./assets/images/map_picker/overwatch/hanamura.jpg) no-repeat center; background-size: cover;">
					Hanamura
				</td>
            </tr>
            <tr>
				<td onclick="disableCell('Hollywood')" onDblClick="lock('Hollywood')" id="Hollywood" style="background: url(./assets/images/map_picker/overwatch/hollywood.jpg) no-repeat center; background-size: cover;">
					Hollywood
				</td>
				<td onclick="disableCell('Ilios')" onDblClick="lock('Ilios')" id="Ilios" style="background: url(./assets/images/map_picker/overwatch/ilios.jpg) no-repeat center; background-size: cover;">
					Ilios
				</td>
				<td onclick="disableCell('KingsRow')" onDblClick="lock('KingsRow')" id="KingsRow" style="background: url(./assets/images/map_picker/overwatch/kingsRow.jpg) no-repeat center; background-size: cover;">
					King's Row
                </td>
                <td onclick="disableCell('Lijiang')" onDblClick="lock('Lijiang')" id="Lijiang" style="background: url(./assets/images/map_picker/overwatch/lijiang.jpg) no-repeat center; background-size: cover;">
					Lijiang
				</td>
				<td onclick="disableCell('Nepal')" onDblClick="lock('Nepal')" id="Nepal" style="background: url(./assets/images/map_picker/overwatch/nepal.jpg) no-repeat center; background-size: cover;">
					Nepal
				</td>
            </tr>

            <tr>
				<td onclick="disableCell('Oasis')" onDblClick="lock('Oasis')" id="Oasis" style="background: url(./assets/images/map_picker/overwatch/oasis.jpg) no-repeat center; background-size: cover;">
					Oasis
				</td>
                <td onclick="disableCell('Numbani')" onDblClick="lock('Numbani')" id="Numbani" style="background: url(./assets/images/map_picker/overwatch/numbani.jpg) no-repeat center; background-size: cover;">
					Numbani
                </td>
                <td onclick="disableCell('Route66')" onDblClick="lock('Route66')" id="Route66" style="background: url(./assets/images/map_picker/overwatch/route66.jpg) no-repeat center; background-size: cover;">
					Route 66
				</td>
				<td onclick="disableCell('Volskaya')" onDblClick="lock('Volskaya')" id="Volskaya" style="background: url(./assets/images/map_picker/overwatch/volskaya.jpg) no-repeat center; background-size: cover;">
					Volskaya
				</td>
                <td onclick="disableCell('Junkertown')" onDblClick="lock('Junkertown')" id="Junkertown" style="background: url(./assets/images/map_picker/overwatch/junkertown.jpg) no-repeat center; background-size: cover;">
					Junkertown
				</td>
            </tr>

            <tr>
                <td onclick="disableCell('Horizon')" onDblClick="lock('Horizon')" id="Horizon" style="background: url(./assets/images/map_picker/overwatch/horizon.jpg) no-repeat center; background-size: cover;">
					Horizon
                </td>
                <td onclick="disableCell('blizzardworld')" onDblClick="lock('blizzardworld')" id="blizzardworld" style="background: url(./assets/images/map_picker/overwatch/blizzardworld.jpg) no-repeat center; background-size: cover;">
					Blizzard World
                </td>
                <td onclick="disableCell('rialto')" onDblClick="lock('rialto')" id="rialto" style="background: url(./assets/images/map_picker/overwatch/rialto.jpg) no-repeat center; background-size: cover;">
					Rialto
                </td>
                <td onclick="disableCell('busan')" onDblClick="lock('busan')" id="busan" style="background: url(./assets/images/map_picker/overwatch/busan.jpg) no-repeat center; background-size: cover;">
					Busan
                </td>

				<td align="right">
                    <div id="homeAction">
                        <a href="./mapPicker.html">
                            <i class="fa fa-home fa-2x"></i>
                        </a>
                    </div>

                    <div id="backAction" onClick="resetPage();">
                        &nbsp;
                    </div>
				</td>
			</tr>
		</table>

		<script>
            // Add function that entry from array by value
            Array.prototype.remove = function() {
                var what, a = arguments, L = a.length, ax;
                    while (L && this.length) {
                    what = a[--L];
                    while ((ax = this.indexOf(what)) !== -1) {
                        this.splice(ax, 1);
                    }
                }
                return this;
            };

            var eliminatedMaps = new Array();
            var mapPool = ['Anubis', 'Dorado', 'Eichenwalde', 'Gibraltar', 'Hanamura', 'Hollywood', 'Ilios', 'KingsRow', 'Lijiang', 'Nepal', 'Numbani', 'Route66', 'Volskaya', 'Oasis', 'Junkertown', 'Horizon', 'blizzardworld', 'rialto', 'busan'];

            $( document ).ready(function() {
                window.console.clear();
            });

            function disableCell(mapName) {
                mapName = mapName.toString();

                if (mapPool.indexOf(mapName) > -1) {
                    if (eliminatedMaps.length < mapPool.length - 1 && eliminatedMaps.indexOf(mapName) < 0) {
                        eliminatedMaps.push(mapName);
                        /*$('#' + mapName).empty();*/
                        $('#' + mapName).css('background-image', 'none');
						$('#' + mapName).css('border-style', 'outset');
						$('#' + mapName).css('border-color', 'red');
						$('#' + mapName).css('border-width', '10px');

                        window.console.log(mapName + ' cell removed.');
                    }
                }

                if (eliminatedMaps.length == mapPool.length - 1) {
                    $('#backAction').html('&nbsp;<i class="fa fa-undo fa-2x"></i>&nbsp;'); /* REST */
                } else if (eliminatedMaps.length > 0) {
                    $('#backAction').css('visibility', 'visible');
                    $('#backAction').html('&nbsp;<i class="fa fa-step-backward fa-2x"></i>&nbsp;');  /* STEP BACKWARDS */
                }
            };

            function enableCell(mapName) {
                if (mapPool.indexOf(mapName) > -1 && eliminatedMaps.indexOf(mapName) > -1) {
                    $('#' + mapName).css('background-image', 'url("./assets/images/map_picker/overwatch/' + mapName + '.jpg")');
                    $('#' + mapName).text(mapName);
					$('#' + mapName).css('border-style', 'outset');
					$('#' + mapName).css('border-color', 'transparent');
					$('#' + mapName).css('border-width', '10px');
                    eliminatedMaps.remove(mapName);

                    window.console.log(mapName + ' cell enabled.');
                }

                if (eliminatedMaps.length < 1) {
                    $('#backAction').css('visibility', 'hidden');
                }
            };

			function lock(mapName) {
				mapName = mapName.toString();

				$('#' + mapName).css('border-style', 'outset');
				$('#' + mapName).css('border-color', 'green');
				$('#' + mapName).css('border-width', '10px');

				if (mapPool.indexOf(mapName) > -1 && eliminatedMaps.indexOf(mapName) > -1) {
                    $('#' + mapName).css('background-image', 'url("./assets/images/map_picker/overwatch/' + mapName + '.jpg")');
                    $('#' + mapName).text(mapName);
                    /*eliminatedMaps.remove(mapName);*/

                    window.console.log(mapName + ' cell locked.');
                }

                if (eliminatedMaps.length < 1) {
                    $('#backAction').css('visibility', 'hidden');
                }

			};

            function resetPage() {
                if (eliminatedMaps.length + 1 >= mapPool.length ) {
                    while (eliminatedMaps.length > 0) {
                        enableCell(eliminatedMaps[eliminatedMaps.length - 1]);
                    }
                } else if (eliminatedMaps.length > 0) {
                    enableCell(eliminatedMaps[eliminatedMaps.length - 1]);
                }
            };
        </script>
	</body>
</html>
