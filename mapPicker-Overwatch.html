<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8" />
		<meta name="author" content="Laclede's LAN" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">

        <title>Overwatch Picker | Laclede's LAN</title>

		<link rel="shortcut icon" href="./assets/images/favicon.ico">

		<script src="./assets/data/mapPickerData.js"></script>
        <script src="./assets/js/jquery-3.min.js"></script>
        <script src="./assets/js/mapPicker.js"></script>

		<link rel="stylesheet" href="./assets/stylesheets/font-awesome.min.css">
		<link rel="stylesheet" href="./assets/stylesheets/mapPicker.css">


	</head>

    <body onload="loadMaps(1)" >

        <div id="maps_container">
        </div>

		<script>
            // Add function that entry from array by value
            Array.prototype.remove = function() {
                var what, a = arguments, L = a.length, ax;
                    while (L && this.length) {
                    what = a[--L];
                    while ((ax = this.indexOf(what)) !== -1) {
                        this.splice(ax, 1);
                    }
                }
                return this;
            };

            var eliminatedMaps = new Array();
            var mapPool = ['Anubis', 'Dorado', 'Eichenwalde', 'Gibraltar', 'Hanamura', 'Hollywood', 'Ilios', 'KingsRow', 'Lijiang', 'Nepal', 'Numbani', 'Route66', 'Volskaya', 'Oasis', 'Junkertown', 'Horizon', 'blizzardworld', 'rialto', 'busan'];

            $( document ).ready(function() {
                window.console.clear();
            });

            function disableCell(mapName) {
                mapName = mapName.toString();

                if (mapPool.indexOf(mapName) > -1) {
                    if (eliminatedMaps.length < mapPool.length - 1 && eliminatedMaps.indexOf(mapName) < 0) {
                        eliminatedMaps.push(mapName);
                        /*$('#' + mapName).empty();*/
                        $('#' + mapName).css('background-image', 'none');
						$('#' + mapName).css('border-style', 'outset');
						$('#' + mapName).css('border-color', 'red');
						$('#' + mapName).css('border-width', '10px');

                        window.console.log(mapName + ' cell removed.');
                    }
                }

                if (eliminatedMaps.length == mapPool.length - 1) {
                    $('#backAction').html('&nbsp;<i class="fa fa-undo fa-2x"></i>&nbsp;'); /* REST */
                } else if (eliminatedMaps.length > 0) {
                    $('#backAction').css('visibility', 'visible');
                    $('#backAction').html('&nbsp;<i class="fa fa-step-backward fa-2x"></i>&nbsp;');  /* STEP BACKWARDS */
                }
            };

            function enableCell(mapName) {
                if (mapPool.indexOf(mapName) > -1 && eliminatedMaps.indexOf(mapName) > -1) {
                    $('#' + mapName).css('background-image', 'url("./assets/images/map_picker/overwatch/' + mapName + '.jpg")');
                    $('#' + mapName).text(mapName);
					$('#' + mapName).css('border-style', 'outset');
					$('#' + mapName).css('border-color', 'transparent');
					$('#' + mapName).css('border-width', '10px');
                    eliminatedMaps.remove(mapName);

                    window.console.log(mapName + ' cell enabled.');
                }

                if (eliminatedMaps.length < 1) {
                    $('#backAction').css('visibility', 'hidden');
                }
            };

			function lock(mapName) {
				mapName = mapName.toString();

				$('#' + mapName).css('border-style', 'outset');
				$('#' + mapName).css('border-color', 'green');
				$('#' + mapName).css('border-width', '10px');

				if (mapPool.indexOf(mapName) > -1 && eliminatedMaps.indexOf(mapName) > -1) {
                    $('#' + mapName).css('background-image', 'url("./assets/images/map_picker/overwatch/' + mapName + '.jpg")');
                    $('#' + mapName).text(mapName);
                    /*eliminatedMaps.remove(mapName);*/

                    window.console.log(mapName + ' cell locked.');
                }

                if (eliminatedMaps.length < 1) {
                    $('#backAction').css('visibility', 'hidden');
                }

			};

            function resetPage() {
                if (eliminatedMaps.length + 1 >= mapPool.length ) {
                    while (eliminatedMaps.length > 0) {
                        enableCell(eliminatedMaps[eliminatedMaps.length - 1]);
                    }
                } else if (eliminatedMaps.length > 0) {
                    enableCell(eliminatedMaps[eliminatedMaps.length - 1]);
                }
            };
        </script>
	</body>
</html>
