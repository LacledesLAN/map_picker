<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8" />
		<meta name="author" content="Laclede's LAN" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">

        <title>Overwatch Picker | Laclede's LAN</title>

		<link rel="shortcut icon" href="./assets/images/favicon.ico">

		<script src="./assets/js/jquery-3.min.js"></script>

		<link rel="stylesheet" href="./assets/stylesheets/font-awesome.min.css">
		<link rel="stylesheet" href="./assets/stylesheets/mapPicker.css">

		<style>
            table tr {
                background-position: left center;
                background-size: cover;
                height: 33%;
                width: 20%;
            }

            table td {
                width: 20%;
            }
		</style>
	</head>

	<body>
		<table>
			<tr>
				<td onclick="disableCell('anubis')" id="anubis" style="background: url(./assets/images/map_picker/overwatch/anubis.jpg) no-repeat center;">
					Anubis
				</td>
				<td onclick="disableCell('dorado')" id="dorado" style="background: url(./assets/images/map_picker/overwatch/dorado.jpg) no-repeat center;">
					Dorado
				</td>
				<td onclick="disableCell('eichenwalde')" id="eichenwalde" style="background: url(./assets/images/map_picker/overwatch/eichenwalde.jpg) no-repeat center;">
					Eichenwalde
				</td>
				<td onclick="disableCell('gibraltar')" id="gibraltar" style="background: url(./assets/images/map_picker/overwatch/gibraltar.jpg) no-repeat center;">
					Gibraltar
				</td>
				<td onclick="disableCell('hanamura')" id="hanamura" style="background: url(./assets/images/map_picker/overwatch/hanamura.jpg) no-repeat center;">
					Hanamura
				</td>
			</tr>
			<tr>
				<td onclick="disableCell('hollywood')" id="hollywood" style="background: url(./assets/images/map_picker/overwatch/hollywood.jpg) no-repeat center;">
					Hollywood
				</td>
				<td onclick="disableCell('ilios')" id="ilios" style="background: url(./assets/images/map_picker/overwatch/ilios.jpg) no-repeat center;">
					Ilios
				</td>
				<td onclick="disableCell('kingsRow')" id="kingsRow" style="background: url(./assets/images/map_picker/overwatch/kingsRow.jpg) no-repeat center;">
					King's Row
				</td>
				<td onclick="disableCell('lijiang')" id="lijiang" style="background: url(./assets/images/map_picker/overwatch/lijiang.jpg) no-repeat center;">
					Lijiang
				</td>
				<td onclick="disableCell('nepal')" id="nepal" style="background: url(./assets/images/map_picker/overwatch/nepal.jpg) no-repeat center;">
					Nepal
				</td>
			</tr>
			<tr>
                <td>
                    &nbsp;
                </td>
				<td onclick="disableCell('numbani')" id="numbani" style="background: url(./assets/images/map_picker/overwatch/numbani.jpg) no-repeat center;">
					Numbani
				</td>
				<td onclick="disableCell('route66')" id="route66" style="background: url(./assets/images/map_picker/overwatch/route66.jpg) no-repeat center;">
					Route 66
				</td>
				<td onclick="disableCell('volskaya')" id="volskaya" style="background: url(./assets/images/map_picker/overwatch/volskaya.jpg) no-repeat center;">
					Volskaya
				</td>
				<td align="right">
                    <div id="homeAction">
                        <a href="./mapPicker.html">
                            <i class="fa fa-home fa-2x"></i>
                        </a>
                    </div>

                    <div id="backAction" onClick="resetPage();">
                        &nbsp;
                    </div>
				</td>
			</tr>
		</table>

		<script>
            // Add function that entry from array by value
            Array.prototype.remove = function() {
                var what, a = arguments, L = a.length, ax;
                    while (L && this.length) {
                    what = a[--L];
                    while ((ax = this.indexOf(what)) !== -1) {
                        this.splice(ax, 1);
                    }
                }
                return this;
            };

            var eliminatedMaps = new Array();
            var mapPool = ['anubis', 'dorado', 'eichenwalde', 'gibraltar', 'hanamura', 'hollywood', 'ilios', 'kingsRow', 'lijiang', 'nepal', 'numbani', 'route66', 'volskaya'];

            $( document ).ready(function() {
                window.console.clear();
            });

            function disableCell(mapName) {
                mapName = mapName.toString();

                if (mapPool.indexOf(mapName) > -1) {
                    if (eliminatedMaps.length < mapPool.length - 1 && eliminatedMaps.indexOf(mapName) < 0) {
                        eliminatedMaps.push(mapName);
                        $('#' + mapName).empty();
                        $('#' + mapName).css('background-image', 'none');

                        window.console.log(mapName + ' cell removed.');
                    }
                }

                if (eliminatedMaps.length == mapPool.length - 1) {
                    $('#backAction').html('&nbsp;<i class="fa fa-undo fa-2x"></i>&nbsp;'); /* REST */
                } else if (eliminatedMaps.length > 0) {
                    $('#backAction').css('visibility', 'visible');
                    $('#backAction').html('&nbsp;<i class="fa fa-step-backward fa-2x"></i>&nbsp;');  /* STEP BACKWARDS */
                }
            };

            function enableCell(mapName) {
                if (mapPool.indexOf(mapName) > -1 && eliminatedMaps.indexOf(mapName) > -1) {
                    $('#' + mapName).css('background-image', 'url("./assets/images/map_picker/overwatch/' + mapName + '.jpg")');
                    $('#' + mapName).text(mapName);
                    eliminatedMaps.remove(mapName);

                    window.console.log(mapName + ' cell enabled.');
                }

                if (eliminatedMaps.length < 1) {
                    $('#backAction').css('visibility', 'hidden');
                }
            };

            function resetPage() {
                if (eliminatedMaps.length + 1 >= mapPool.length ) {
                    while (eliminatedMaps.length > 0) {
                        enableCell(eliminatedMaps[eliminatedMaps.length - 1]);
                    }
                } else if (eliminatedMaps.length > 0) {
                    enableCell(eliminatedMaps[eliminatedMaps.length - 1]);
                }
            };
        </script>
	</body>
</html>
